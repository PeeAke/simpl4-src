
<polymer-element name="simpl4-form">
	<template>
		<link rel="stylesheet" type="text/css" href="grids.css" />
		<link rel="stylesheet" type="text/css" href="grids-responsive.css" />
		<style>
			body,
			button,
			pre,
			input {
				font-family: sans-serif;
			}
			[column] {
				min-width: 320px;
				max-width: 700px;
				margin: 0 auto;
			}
			#form {
				background-color: whitesmoke;
			}
			[segment] > segment {
				margin-left: 0;
			}
			segment {
				margin-top: 8px !important;
				margin-bottom: 8px !important;
			}
			ssn-field {
				min-width: 220px;
			}
			paper-item {
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
				font-size: 12px;
			}
		</style>
		<paper-form segment id="form">

			<h2>Form-factor</h2>

			<segment>
				<paper-row if="row" class="pure-g">
                <div class="pure-control-group">
					<input-field type="text" id="OrderName" value="{{item.orderId}}" data-constraints = '@Min(value=21)' editValue="{{orderId}}" invalidated="{{item.orderId | validateOrderId}}" error="Must be at least five characters long"></input-field>
					</div>
				</paper-row>
				<paper-row>
                <div class="pure-control-group pure-u-1 pure-u-md-11-24">
					<ssn-field name="SSN1" value="{{item.ssn}}"></ssn-field>
					</div>
                <div class="pure-control-group pure-u-1 pure-u-md-11-24">
					<ssn-field name="SSN" value="{{item.ssn}}"></ssn-field>
					</div>
				</paper-row>
				<paper-row>
                <div class="pure-control-group pure-u-1 pure-u-md-11-24">
					<ssn-field name="SSNAAAAAAA" value="{{item.ssn}}"></ssn-field>
					</div>
                <div class="pure-control-group pure-u-1 pure-u-md-11-24">
					<ssn-field name="SSN" value="{{item.ssn}}"></ssn-field>
					</div>
				</paper-row>
			</segment>

			<segment>
				<paper-row>
                <div class="pure-control-group">
					<input-field type="date" name="FlanFlavor" value="{{item.flavor}}" editValue="{{flavor}}" invalidated="{{item.flavor | validateFlavor}}" error="Any flavor is fine, as long as it contains chocolate"></input-field>
					</div>
					<slider-field name="Viscosity" value="{{item.viscosity}}"></slider-field>
				</paper-row>

				<paper-row>
					<toggle-field name="Whip Cream" value="{{item.whipCream}}"></toggle-field>
					<checkbox-field name="Egg Cream" value="{{item.eggCream}}"></checkbox-field>
					<toggle-field name="Heavy Cream" value="{{item.heavyCream}}"></toggle-field>
					<checkbox-field name="Sweet Cream" value="{{item.sweetCream}}"></checkbox-field>
				</paper-row>
			</segment>

			<segment>
				<paper-row>
					<radio-field name="Shape" value="{{item.shape}}">
						<paper-radio-button label="Square" active></paper-radio-button>
						<paper-radio-button label="Circle"></paper-radio-button>
						<paper-radio-button label="Tubular"></paper-radio-button>
						<paper-radio-button label="Mobius"></paper-radio-button>
					</radio-field>
				</paper-row>

				<dropdown-field one-column name="Extra Layers ({{item.layers || 0}})" value="{{item.layers}}">
					<paper-item>Single Layer</paper-item>
					<paper-item>One Extra Layer</paper-item>
					<paper-item>Two Extra Layers</paper-item>
					<paper-item>Three Extra Layers</paper-item>
				</dropdown-field>
			</segment>

			<div>
				<button on-tap="{{submit}}">Submit</button>
			</div>

		</paper-form>

		<segment>
			Your form data:
			<pre><code id="data"></code></pre>
		</segment>
	</template>
	<script>
		Polymer("simpl4-form", {
			item: {
				shape: 0
			},

			submit: function(e) {
				var v = regula.validate({element: this.$.OrderName});
				console.log("V:",v);
				return;
				//var is = this.v.validate();
				var is = this.v.isValid();
				console.log("isValid:",is);
				var info = '';
				//if (!this.$.form.validate()) {
				//	info += '* form is not valid\n\n';
				//}
				var data = this.$.form.dump();
				info += JSON.stringify(data, null, 2);
				console.log("Info:" + info);


				this.$.data.textContent = info;
			},

			validateOrderId: function(value) {
				console.log("validateOrderId:" + value);
				return !value || value.length < 5;
			},

			validateFlavor: function(value) {
				return !value || value.toLowerCase().indexOf('chocolate') < 0;
			},
			attached: function() {
				this.fire('add-form-field');
			},
			detached: function() {
				this.fire('remove-form-field');
			},
			domReady:function(){
regula.bind();
/*regula.bind({
        elements: [this.$.OrderName],
        constraints: [{
            constraintType: regula.Constraint.Min,
            params: {value: "18", message: "You must be at least 18 years old to vote",groups:['MyGroup']}
        }]
    });
 console.log("element element1", regula.isBound({element: this.$.OrderName}));*/

}
		});

	</script>
</polymer-element>
