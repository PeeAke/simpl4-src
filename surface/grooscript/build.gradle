defaultTasks "buildAll"

buildscript {
	dependencies {
		classpath files("${repository}/grooscript-gradle-plugin-0.8.jar")
		classpath files("${repository}/grooscript-0.6.3.jar")
	}
}

apply plugin: 'groovy'
apply plugin: 'org.grooscript.conversion' //<2>

grooscript {
	source = ['groovy'] //Sources to be converted(List), default is ['src/main/groovy']
	destination = 'js' //Target directory for js files, default is 'src/main/webapp/js/app'
	classPath = ['groovy'] //Needed classpath's to compile source files(List), default is ['src/main/groovy']
	customization = null //Customization in files, it's a closure, as for example { -> ast(groovy.transform.TypeChecked) }
	initialText = '//Grooscript converted file'
	initialText = '//End converted file'
	recursive = true //Default is false
	addGsLib = null
}

task stage (type:Task) {
	dependsOn convert
	doLast(){
		ant.concat(destfile:"${surfaceBuild}/grooscript-all.js") {
			fileset(dir:'js',includes:'**/*.js')
		}
	}
}

task buildAll (type:Task) { 
	dependsOn stage
}
