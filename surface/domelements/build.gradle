defaultTasks "buildAll"


task buildHtml (type:Exec) {
	executable "/bin/sh"
	args "-c", "./make-all.sh"
}

task stage (type:Task) {
	dependsOn buildHtml
	doLast(){
		ant.copy( file:"domelements.js", todir:"${surfaceBuildUC}",overwrite:"true")
		ant.gzip( src:"domelements.html",destfile:"domelements.html.gz")
		ant.gzip( src:"domelements.js",destfile:"domelements.js.gz")
		ant.copy( file:"domelements.html.gz", todir:"${surfaceBuild}",overwrite:"true")
		ant.copy( file:"domelements.js.gz", todir:"${surfaceBuild}",overwrite:"true")

		ant.replace(file:"domelements.html", token:"domelements.js.gz", value:"domelements.js")
		ant.copy( file:"domelements.html", todir:"${surfaceBuildUC}",overwrite:"true")

	}
}

task buildAll (type:Task) {
	dependsOn stage
}
