<!--
/**
 * This file is part of SIMPL4(http://simpl4.org).
 *
 * 	Copyright [2014] [Manfred Sattler] <manfred@ms123.org>
 *
 * SIMPL4 is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * SIMPL4 is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with SIMPL4.  If not, see <http://www.gnu.org/licenses/>.
 */
-->
<link rel="import" href="import-js.html">
<polymer-element name="simpl-datatables" attributes="" flex relative>
	<template>
		<link rel="stylesheet" type="text/css" href="jquery.dataTables.css" />
		<link rel="stylesheet" type="text/css" href="dataTables.responsive.css" />
		<style shim_shadowdom>
			:host /deep/ #datatables_main {
				width: 100%;
				max-width: 100%;
				font-size: 12px;
				cursor: default;
			}
			:host /deep/ #datatables_main tr {
				height: 24px;
			}
			@media screen and (max-width: 767px) {
				:host /deep/ #datatables_main tr {
					height: 28px;
				}
			}
			:host /deep/ #datatables_main_length {
				max-width: 170px;
				font-size: 12px;
				float: left;
			}
			:host /deep/ #datatables_main_length select {
				font-size: 11px;
				width: 50px;
			}
			:host /deep/ #datatables_main_length label {
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
				display: block;
			}
			:host /deep/ #datatables_main_filter label {
				font-size: 12px;
			}
			:host /deep/ #datatables_main_filter input {
				width: 90px;
			}
			:host /deep/ td:first-child:before {
				top: 3px !important;
				height: 16px !important;
				width: 16px !important;
				font-size: 14px !important;
				font-family: verdana !important;
				line-height: 14px !important;
				left: 4px !important;
				font-weight: 800 !important;
				border: 1px solid black !important;
				border-radius: 3px !important;
				box-shadow: 0 0 0px !important;
				background-color: white !important;
				color: black !important;
			}
			@media screen and (max-width: 767px) {
				:host /deep/ td:first-child:before {
					top: 1px !important;
					height: 23px !important;
					width: 22px !important;
					font-size: 20px !important;
					font-family: verdana !important;
					line-height: 23px !important;
					left: 2px !important;
				}
			}
			:host /deep/ table.dataTable.stripe tbody tr.odd,
			table.dataTable.display tbody tr.odd {
				cursor: default;
			}
			,
			:host /deep/ table.dataTable.stripe tbody tr.even,
			table.dataTable.display tbody tr.even {
				cursor: default;
			}
			:host /deep/ table.dataTable.display tbody tr.odd > .sorting_1 {}:host /deep/ table.dataTable.display tbody tr.even > .sorting_1 {}:host /deep/ table.dataTable.stripe tbody tr.odd.selected,
			table.dataTable.display tbody tr.odd.selected > .sorting_1,
			:host /deep/ table.dataTable.stripe tbody tr.odd.selected,
			table.dataTable.display tbody tr.odd.selected,
			:host /deep/ table.dataTable.stripe tbody tr.even.selected,
			table.dataTable.display tbody tr.even.selected > .sorting_1,
			:host /deep/ table.dataTable.stripe tbody tr.even.selected,
			table.dataTable.display tbody tr.even.selected {
				background: #969FA3;
				color: white;
			}
			:host /deep/ .dtr-title {
				font-size: 13px;
			}
			:host /deep/ .dtr-data {
				white-space: normal;
				font-size: 12px;
			}
			:host /deep/ table.dataTable {
				background: #fff;
			}
			:host /deep/ table.dataTable tbody tr td:not(:first-child) {
				padding: 5px 8px 5px;
				line-height: 1.0;
			}
			:host /deep/ table.dataTable tbody tr td:first-child {
				padding: 5px 28px 5px;
			}
			:host /deep/ table.dataTable thead tr th,
			table.dataTable tfoot tr th {
				background: #fff;
				padding: 0em 0.625em 0em;
				text-align: left;
				line-height: 1.6;
			}
		</style>
		<div style="overflow:hidden;">
			<table cellpadding="0" cellspacing="0" border="0" width="100%" class="display responsive" id="datatables_main"></table>
		</div>
		<content>
		</content>
	</template>
	<script>
		Polymer( {
			dtTable: null,
			ready: function() {},
			domReady: function() {},
			createTable: function( dtMeta, dataSet ) {
				console.log( "createTable:", this.dtTable );
				if ( this.dtTable ) {
					this.dtTable.destroy( false );
				}
				var self = this;
				var dtMainElem = $( this.$.datatables_main );
				if ( this.dtTable == null ) {
					dtMainElem.on( 'init.dt.dtr', function( e, settings, json ) {
						new jQuery.fn.dataTable.Responsive( settings );
					} );
				}
				this.dtTable = dtMainElem.DataTable( {
					language: {
						"sEmptyTable": "Keine Daten in der Tabelle vorhanden",
						"sInfo": "_START_ bis _END_ von _TOTAL_ Einträgen",
						"sInfoEmpty": "0 bis 0 von 0 Einträgen",
						"sInfoFiltered": "(gefiltert von _MAX_ Einträgen)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ Einträge",
						"sLoadingRecords": "Wird geladen...",
						"sProcessing": "Bitte warten...",
						"sSearch": "Ergebnis filtern",
						"sZeroRecords": "Keine Einträge vorhanden.",
						"oPaginate": {
							"sFirst": "Erste",
							"sPrevious": "Zurück",
							"sNext": "Nächste",
							"sLast": "Letzte"
						},
						"oAria": {
							"sSortAscending": ": aktivieren, um Spalte aufsteigend zu sortieren",
							"sSortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
						}
					},
					stateSave: false,
					_columnDefs: [ {
						className: 'control',
						orderable: false,
						targets: 0
					} ],
					responsive: {
						details: {
							type: 'inline'
						}
					},
					data: dataSet,
					columns: dtMeta
				} );
			}
		} );
	</script>
</polymer-element>
